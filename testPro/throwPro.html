<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ì„¸ë¡œ ê²Œì´ì§€ (ìë™ ê°ì†Œ)</title>
  <style>
      body {
          font-family: 'Arial', sans-serif;
          text-align: center;
          padding-top: 50px;
      }

      .gauge-container {
          width: 60px;
          height: 300px;
          border: 2px solid #333;
          margin: 0 auto 20px;
          border-radius: 10px;
          background-color: #f1f1f1;
          position: relative;
          overflow: hidden;
      }

      .guide-line {
          position: absolute;
          width: 100%;
          height: 2px;
          background-color: rgba(0, 0, 0, 0.5);
          left: 0;
          z-index: 2; /* ê²Œì´ì§€ ë°”ë³´ë‹¤ ìœ„ì— ìˆë„ë¡ ì„¤ì • */
      }

      .guide-70 {
          bottom: 70%;
      }

      .guide-90 {
          bottom: 90%;
      }

      .gauge-bar {
          position: absolute;
          bottom: 0;
          width: 100%;
          height: 20%;
          background-color: #4caf50;
          transition: height 0.3s ease;
          z-index: 1; /* ê°€ì´ë“œ ë¼ì¸ë³´ë‹¤ ì•„ë˜ */
      }

      .btn {
          padding: 10px 20px;
          font-size: 16px;
          background-color: #2196f3;
          color: white;
          border: none;
          border-radius: 8px;
          cursor: pointer;
      }

      .btn:disabled {
          background-color: #aaa;
          cursor: not-allowed;
      }

      .message {
          margin-top: 20px;
          font-size: 18px;
      }

  </style>
</head>
<body>

  <h2>ğŸ”¼ ì„¸ë¡œ ê²Œì´ì§€ë¥¼ ì±„ì›Œë³´ì„¸ìš”!</h2>

  <div class="message" id="scoreDisplay">ì ìˆ˜: 0ì </div>

  <div class="gauge-container">
    <div class="guide-line guide-70"></div>
    <div class="guide-line guide-90"></div>
    <div class="gauge-bar" id="gaugeBar"></div>
  </div>

  <button class="btn" id="clickBtn">í´ë¦­!</button>
  <div class="message" id="message"></div>

  <script>
    const gaugeBar = document.getElementById('gaugeBar');
    const message = document.getElementById('message');
    const clickBtn = document.getElementById('clickBtn');
    const scoreDisplay = document.getElementById('scoreDisplay');
    let score = 0; // ì´ˆê¸° ì ìˆ˜

    let currentPercent = 70; // ì´ˆê¸°ê°’ 20%
    gaugeBar.style.height = `${currentPercent}%`;
    updateGaugeColor(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

    let expectedClick = 0; // 0: ì¢Œí´ë¦­, 2: ìš°í´ë¦­

    function updateGaugeColor() {
      if (currentPercent > 90) {
        gaugeBar.style.backgroundColor = '#f44336'; // ë¹¨ê°•
      } else if (currentPercent < 70) {
        gaugeBar.style.backgroundColor = '#ffeb3b'; // ë…¸ë‘
      } else {
        gaugeBar.style.backgroundColor = '#4caf50'; // ì´ˆë¡ (ê¸°ë³¸)
      }
    }

    // ì¢Œ/ìš° í´ë¦­ ë²ˆê°ˆì•„ê°€ë©° ê²Œì´ì§€ ì¦ê°€
    clickBtn.addEventListener('mousedown', (e) => {
      e.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€ (íŠ¹íˆ ìš°í´ë¦­ ë©”ë‰´)

      // í´ë¦­ ìˆœì„œê°€ ë§ì„ ë•Œë§Œ ì§„í–‰
      if (e.button === expectedClick && currentPercent < 100) {
        currentPercent += 10;
        if (currentPercent > 100) currentPercent = 100;
        gaugeBar.style.height = `${currentPercent}%`;
        updateGaugeColor(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

        // ë‹¤ìŒì— ëˆŒëŸ¬ì•¼ í•  í´ë¦­ ë°˜ì „
        expectedClick = expectedClick === 0 ? 2 : 0;

        // ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
        message.textContent = '';
        if (currentPercent === 100) {
          message.textContent = 'ğŸ‰ ê²Œì´ì§€ê°€ ê°€ë“ ì°¼ì–´ìš”!';
        }
      }
    });

    // ìš°í´ë¦­ ë©”ë‰´ ë§‰ê¸°
    document.addEventListener('contextmenu', (e) => e.preventDefault());

    // ì¼ì • ì‹œê°„ë§ˆë‹¤ 5%ì”© ê°ì†Œ (0.5ì´ˆë§ˆë‹¤)
    setInterval(() => {
      if (currentPercent > 0 && currentPercent < 100) {
        currentPercent -= 5;
        if (currentPercent < 0) currentPercent = 0;
        gaugeBar.style.height = `${currentPercent}%`;
        updateGaugeColor(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
        message.textContent = '';
      }
    }, 2000);

    // 70~90% ì‚¬ì´ì— 3ì´ˆ ì´ìƒ ìœ ì§€í•˜ë©´ ì„±ê³µ
    let successCheckCount = 0;
    let successTriggered = false;

    setInterval(() => {
      if (currentPercent >= 70 && currentPercent <= 90) {
        successCheckCount++;
        console.log(`ì¹´ìš´íŠ¸: ${successCheckCount}`);
        if (successCheckCount === 6) {
        // if (successCheckCount === 6 && !successTriggered) {
          score += 30;
          successCheckCount = 0;
          console.log('30ì  ì¶”ê°€');
          scoreDisplay.textContent = `ì ìˆ˜: ${score}ì `;
          // successTriggered = true;
        }
      } else {
        successCheckCount = 0;
        console.log('ì¹´ìš´íŠ¸ 0ì´ ëìŒ.');
        // successTriggered = false;
      }
    }, 500); // 0.5ì´ˆë§ˆë‹¤ ì²´í¬
  </script>

</body>
</html>